<form [formGroup]="stockPickerForm">
  <mat-form-field>
    <input matInput placeholder="Symbol e.g AAPL" formControlName="symbol" />
    <mat-error
      ><span
        *ngIf="
          !stockPickerForm.get('symbol').valid &&
          stockPickerForm.get('symbol').touched
        "
        >{{ formError.symbol }}</span
      >
    </mat-error>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Favorite time period</mat-label>
    <mat-select formControlName="period">
      <mat-option
        *ngFor="let enum of (timePeriods | keyvalue)"
        [value]="enum.value"
      >
        {{ enum.key }}
      </mat-option>
    </mat-select>
    <mat-error
      ><span
        *ngIf="
          !stockPickerForm.get('period').valid &&
          stockPickerForm.get('period').touched
        "
        >{{ formError.period }}</span
      >
    </mat-error>
  </mat-form-field>

  <button (click)="fetchQuote()" mat-raised-button>Go</button>
</form>

<div *ngIf="apiError">
  <mat-error
    ><span>{{ formError.apiError }}</span></mat-error
  >
</div>
<coding-challenge-chart
  [data]="quotes$ | async"
  [chart]="{
    title: '',
    type: 'LineChart',
    data: [],
    columnNames: ['period', 'close'],
    options: { title: 'Google Stock', width: '600', height: '400' }
  }"
></coding-challenge-chart>
